import{R as H,r as ae,f as _t,j as y}from"./index-CpqSmuqB.js";import{c as Vt}from"./helper-BzBdq6gI.js";import{T as pt}from"./ThemeToggle-DbCPRthF.js";import{l as At}from"./components-CeugLcM5.js";var ge=e=>e.type==="checkbox",oe=e=>e instanceof Date,B=e=>e==null;const st=e=>typeof e=="object";var L=e=>!B(e)&&!Array.isArray(e)&&st(e)&&!oe(e),Nt=e=>L(e)&&e.target?ge(e.target)?e.target.checked:e.target.value:e,Et=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,St=(e,s)=>e.has(Et(s)),jt=e=>{const s=e.constructor&&e.constructor.prototype;return L(s)&&s.hasOwnProperty("isPrototypeOf")},je=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function P(e){let s;const t=Array.isArray(e),a=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)s=new Date(e);else if(e instanceof Set)s=new Set(e);else if(!(je&&(e instanceof Blob||a))&&(t||L(e)))if(s=t?[]:{},!t&&!jt(e))s=e;else for(const o in e)e.hasOwnProperty(o)&&(s[o]=P(e[o]));else return e;return s}var _e=e=>Array.isArray(e)?e.filter(Boolean):[],T=e=>e===void 0,h=(e,s,t)=>{if(!s||!L(e))return t;const a=_e(s.split(/[,[\].]+?/)).reduce((o,l)=>B(o)?o:o[l],e);return T(a)||a===e?T(e[s])?t:e[s]:a},te=e=>typeof e=="boolean",De=e=>/^\w*$/.test(e),it=e=>_e(e.replace(/["|']|\]/g,"").split(/\.|\[/)),N=(e,s,t)=>{let a=-1;const o=De(s)?[s]:it(s),l=o.length,u=l-1;for(;++a<l;){const m=o[a];let j=t;if(a!==u){const $=e[m];j=L($)||Array.isArray($)?$:isNaN(+o[a+1])?{}:[]}if(m==="__proto__"||m==="constructor"||m==="prototype")return;e[m]=j,e=e[m]}};const He={BLUR:"blur",FOCUS_OUT:"focusout"},X={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},se={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Dt=H.createContext(null),Lt=()=>H.useContext(Dt);var Ct=(e,s,t,a=!0)=>{const o={defaultValues:s._defaultValues};for(const l in e)Object.defineProperty(o,l,{get:()=>{const u=l;return s._proxyFormState[u]!==X.all&&(s._proxyFormState[u]=!a||X.all),e[u]}});return o};const at=typeof window<"u"?ae.useLayoutEffect:ae.useEffect;var re=e=>typeof e=="string",lt=(e,s,t,a,o)=>re(e)?(a&&s.watch.add(e),h(t,e,o)):Array.isArray(e)?e.map(l=>(a&&s.watch.add(l),h(t,l))):(a&&(s.watchAll=!0),t);function Tt(e){const s=Lt(),{control:t=s.control,name:a,defaultValue:o,disabled:l,exact:u}=e||{},m=H.useRef(o),[j,$]=H.useState(t._getWatch(a,m.current));return at(()=>t._subscribe({name:a,formState:{values:!0},exact:u,callback:v=>!l&&$(lt(a,t._names,v.values||t._formValues,!1,m.current))}),[a,t,l,u]),H.useEffect(()=>t._removeUnmounted()),j}var Ot=(e,s,t,a,o)=>s?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[a]:o||!0}}:{},me=e=>Array.isArray(e)?e:[e],ze=()=>{let e=[];return{get observers(){return e},next:o=>{for(const l of e)l.next&&l.next(o)},subscribe:o=>(e.push(o),{unsubscribe:()=>{e=e.filter(l=>l!==o)}}),unsubscribe:()=>{e=[]}}},Se=e=>B(e)||!st(e);function le(e,s){if(Se(e)||Se(s))return e===s;if(oe(e)&&oe(s))return e.getTime()===s.getTime();const t=Object.keys(e),a=Object.keys(s);if(t.length!==a.length)return!1;for(const o of t){const l=e[o];if(!a.includes(o))return!1;if(o!=="ref"){const u=s[o];if(oe(l)&&oe(u)||L(l)&&L(u)||Array.isArray(l)&&Array.isArray(u)?!le(l,u):l!==u)return!1}}return!0}var I=e=>L(e)&&!Object.keys(e).length,Le=e=>e.type==="file",Z=e=>typeof e=="function",we=e=>{if(!je)return!1;const s=e?e.ownerDocument:0;return e instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},nt=e=>e.type==="select-multiple",Ce=e=>e.type==="radio",Rt=e=>Ce(e)||ge(e),Ee=e=>we(e)&&e.isConnected;function Mt(e,s){const t=s.slice(0,-1).length;let a=0;for(;a<t;)e=T(e)?a++:e[s[a++]];return e}function $t(e){for(const s in e)if(e.hasOwnProperty(s)&&!T(e[s]))return!1;return!0}function M(e,s){const t=Array.isArray(s)?s:De(s)?[s]:it(s),a=t.length===1?e:Mt(e,t),o=t.length-1,l=t[o];return a&&delete a[l],o!==0&&(L(a)&&I(a)||Array.isArray(a)&&$t(a))&&M(e,t.slice(0,-1)),e}var ot=e=>{for(const s in e)if(Z(e[s]))return!0;return!1};function Fe(e,s={}){const t=Array.isArray(e);if(L(e)||t)for(const a in e)Array.isArray(e[a])||L(e[a])&&!ot(e[a])?(s[a]=Array.isArray(e[a])?[]:{},Fe(e[a],s[a])):B(e[a])||(s[a]=!0);return s}function dt(e,s,t){const a=Array.isArray(e);if(L(e)||a)for(const o in e)Array.isArray(e[o])||L(e[o])&&!ot(e[o])?T(s)||Se(t[o])?t[o]=Array.isArray(e[o])?Fe(e[o],[]):{...Fe(e[o])}:dt(e[o],B(s)?{}:s[o],t[o]):t[o]=!le(e[o],s[o]);return t}var fe=(e,s)=>dt(e,s,Fe(s));const Ke={value:!1,isValid:!1},Je={value:!0,isValid:!0};var ut=e=>{if(Array.isArray(e)){if(e.length>1){const s=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:s,isValid:!!s.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!T(e[0].attributes.value)?T(e[0].value)||e[0].value===""?Je:{value:e[0].value,isValid:!0}:Je:Ke}return Ke},ct=(e,{valueAsNumber:s,valueAsDate:t,setValueAs:a})=>T(e)?e:s?e===""?NaN:e&&+e:t&&re(e)?new Date(e):a?a(e):e;const Ye={isValid:!1,value:null};var ft=e=>Array.isArray(e)?e.reduce((s,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:s,Ye):Ye;function Qe(e){const s=e.ref;return Le(s)?s.files:Ce(s)?ft(e.refs).value:nt(s)?[...s.selectedOptions].map(({value:t})=>t):ge(s)?ut(e.refs).value:ct(T(s.value)?e.ref.value:s.value,e)}var Pt=(e,s,t,a)=>{const o={};for(const l of e){const u=h(s,l);u&&N(o,l,u._f)}return{criteriaMode:t,names:[...e],fields:o,shouldUseNativeValidation:a}},ke=e=>e instanceof RegExp,ye=e=>T(e)?e:ke(e)?e.source:L(e)?ke(e.value)?e.value.source:e.value:e,Xe=e=>({isOnSubmit:!e||e===X.onSubmit,isOnBlur:e===X.onBlur,isOnChange:e===X.onChange,isOnAll:e===X.all,isOnTouch:e===X.onTouched});const Ze="AsyncFunction";var Ut=e=>!!e&&!!e.validate&&!!(Z(e.validate)&&e.validate.constructor.name===Ze||L(e.validate)&&Object.values(e.validate).find(s=>s.constructor.name===Ze)),It=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Ge=(e,s,t)=>!t&&(s.watchAll||s.watch.has(e)||[...s.watch].some(a=>e.startsWith(a)&&/^\.\w+/.test(e.slice(a.length))));const he=(e,s,t,a)=>{for(const o of t||Object.keys(e)){const l=h(e,o);if(l){const{_f:u,...m}=l;if(u){if(u.refs&&u.refs[0]&&s(u.refs[0],o)&&!a)return!0;if(u.ref&&s(u.ref,u.name)&&!a)return!0;if(he(m,s))break}else if(L(m)&&he(m,s))break}}};function et(e,s,t){const a=h(e,t);if(a||De(t))return{error:a,name:t};const o=t.split(".");for(;o.length;){const l=o.join("."),u=h(s,l),m=h(e,l);if(u&&!Array.isArray(u)&&t!==l)return{name:t};if(m&&m.type)return{name:l,error:m};o.pop()}return{name:t}}var Bt=(e,s,t,a)=>{t(e);const{name:o,...l}=e;return I(l)||Object.keys(l).length>=Object.keys(s).length||Object.keys(l).find(u=>s[u]===(!a||X.all))},qt=(e,s,t)=>!e||!s||e===s||me(e).some(a=>a&&(t?a===s:a.startsWith(s)||s.startsWith(a))),Wt=(e,s,t,a,o)=>o.isOnAll?!1:!t&&o.isOnTouch?!(s||e):(t?a.isOnBlur:o.isOnBlur)?!e:(t?a.isOnChange:o.isOnChange)?e:!0,Ht=(e,s)=>!_e(h(e,s)).length&&M(e,s),zt=(e,s,t)=>{const a=me(h(e,t));return N(a,"root",s[t]),N(e,t,a),e},ve=e=>re(e);function tt(e,s,t="validate"){if(ve(e)||Array.isArray(e)&&e.every(ve)||te(e)&&!e)return{type:t,message:ve(e)?e:"",ref:s}}var ue=e=>L(e)&&!ke(e)?e:{value:e,message:""},rt=async(e,s,t,a,o,l)=>{const{ref:u,refs:m,required:j,maxLength:$,minLength:v,min:g,max:b,pattern:E,validate:C,name:D,valueAsNumber:Y,mount:ne}=e._f,k=h(t,D);if(!ne||s.has(D))return{};const Q=m?m[0]:u,z=w=>{o&&Q.reportValidity&&(Q.setCustomValidity(te(w)?"":w||""),Q.reportValidity())},V={},K=Ce(u),O=ge(u),G=K||O,p=(Y||Le(u))&&T(u.value)&&T(k)||we(u)&&u.value===""||k===""||Array.isArray(k)&&!k.length,R=Ot.bind(null,D,a,V),q=(w,F,S,U=se.maxLength,W=se.minLength)=>{const ee=w?F:S;V[D]={type:w?U:W,message:ee,ref:u,...R(w?U:W,ee)}};if(l?!Array.isArray(k)||!k.length:j&&(!G&&(p||B(k))||te(k)&&!k||O&&!ut(m).isValid||K&&!ft(m).isValid)){const{value:w,message:F}=ve(j)?{value:!!j,message:j}:ue(j);if(w&&(V[D]={type:se.required,message:F,ref:Q,...R(se.required,F)},!a))return z(F),V}if(!p&&(!B(g)||!B(b))){let w,F;const S=ue(b),U=ue(g);if(!B(k)&&!isNaN(k)){const W=u.valueAsNumber||k&&+k;B(S.value)||(w=W>S.value),B(U.value)||(F=W<U.value)}else{const W=u.valueAsDate||new Date(k),ee=xe=>new Date(new Date().toDateString()+" "+xe),ce=u.type=="time",de=u.type=="week";re(S.value)&&k&&(w=ce?ee(k)>ee(S.value):de?k>S.value:W>new Date(S.value)),re(U.value)&&k&&(F=ce?ee(k)<ee(U.value):de?k<U.value:W<new Date(U.value))}if((w||F)&&(q(!!w,S.message,U.message,se.max,se.min),!a))return z(V[D].message),V}if(($||v)&&!p&&(re(k)||l&&Array.isArray(k))){const w=ue($),F=ue(v),S=!B(w.value)&&k.length>+w.value,U=!B(F.value)&&k.length<+F.value;if((S||U)&&(q(S,w.message,F.message),!a))return z(V[D].message),V}if(E&&!p&&re(k)){const{value:w,message:F}=ue(E);if(ke(w)&&!k.match(w)&&(V[D]={type:se.pattern,message:F,ref:u,...R(se.pattern,F)},!a))return z(F),V}if(C){if(Z(C)){const w=await C(k,t),F=tt(w,Q);if(F&&(V[D]={...F,...R(se.validate,F.message)},!a))return z(F.message),V}else if(L(C)){let w={};for(const F in C){if(!I(w)&&!a)break;const S=tt(await C[F](k,t),Q,F);S&&(w={...S,...R(F,S.message)},z(S.message),a&&(V[D]=w))}if(!I(w)&&(V[D]={ref:Q,...w},!a))return V}}return z(!0),V};const Kt={mode:X.onSubmit,reValidateMode:X.onChange,shouldFocusError:!0};function Jt(e={}){let s={...Kt,...e},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:Z(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1};const a={};let o=L(s.defaultValues)||L(s.values)?P(s.defaultValues||s.values)||{}:{},l=s.shouldUnregister?{}:P(o),u={action:!1,mount:!1,watch:!1},m={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},j,$=0;const v={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let g={...v};const b={array:ze(),state:ze()},E=s.criteriaMode===X.all,C=r=>i=>{clearTimeout($),$=setTimeout(r,i)},D=async r=>{if(!s.disabled&&(v.isValid||g.isValid||r)){const i=s.resolver?I((await O()).errors):await p(a,!0);i!==t.isValid&&b.state.next({isValid:i})}},Y=(r,i)=>{!s.disabled&&(v.isValidating||v.validatingFields||g.isValidating||g.validatingFields)&&((r||Array.from(m.mount)).forEach(n=>{n&&(i?N(t.validatingFields,n,i):M(t.validatingFields,n))}),b.state.next({validatingFields:t.validatingFields,isValidating:!I(t.validatingFields)}))},ne=(r,i=[],n,f,c=!0,d=!0)=>{if(f&&n&&!s.disabled){if(u.action=!0,d&&Array.isArray(h(a,r))){const x=n(h(a,r),f.argA,f.argB);c&&N(a,r,x)}if(d&&Array.isArray(h(t.errors,r))){const x=n(h(t.errors,r),f.argA,f.argB);c&&N(t.errors,r,x),Ht(t.errors,r)}if((v.touchedFields||g.touchedFields)&&d&&Array.isArray(h(t.touchedFields,r))){const x=n(h(t.touchedFields,r),f.argA,f.argB);c&&N(t.touchedFields,r,x)}(v.dirtyFields||g.dirtyFields)&&(t.dirtyFields=fe(o,l)),b.state.next({name:r,isDirty:q(r,i),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else N(l,r,i)},k=(r,i)=>{N(t.errors,r,i),b.state.next({errors:t.errors})},Q=r=>{t.errors=r,b.state.next({errors:t.errors,isValid:!1})},z=(r,i,n,f)=>{const c=h(a,r);if(c){const d=h(l,r,T(n)?h(o,r):n);T(d)||f&&f.defaultChecked||i?N(l,r,i?d:Qe(c._f)):S(r,d),u.mount&&D()}},V=(r,i,n,f,c)=>{let d=!1,x=!1;const _={name:r};if(!s.disabled){if(!n||f){(v.isDirty||g.isDirty)&&(x=t.isDirty,t.isDirty=_.isDirty=q(),d=x!==_.isDirty);const A=le(h(o,r),i);x=!!h(t.dirtyFields,r),A?M(t.dirtyFields,r):N(t.dirtyFields,r,!0),_.dirtyFields=t.dirtyFields,d=d||(v.dirtyFields||g.dirtyFields)&&x!==!A}if(n){const A=h(t.touchedFields,r);A||(N(t.touchedFields,r,n),_.touchedFields=t.touchedFields,d=d||(v.touchedFields||g.touchedFields)&&A!==n)}d&&c&&b.state.next(_)}return d?_:{}},K=(r,i,n,f)=>{const c=h(t.errors,r),d=(v.isValid||g.isValid)&&te(i)&&t.isValid!==i;if(s.delayError&&n?(j=C(()=>k(r,n)),j(s.delayError)):(clearTimeout($),j=null,n?N(t.errors,r,n):M(t.errors,r)),(n?!le(c,n):c)||!I(f)||d){const x={...f,...d&&te(i)?{isValid:i}:{},errors:t.errors,name:r};t={...t,...x},b.state.next(x)}},O=async r=>{Y(r,!0);const i=await s.resolver(l,s.context,Pt(r||m.mount,a,s.criteriaMode,s.shouldUseNativeValidation));return Y(r),i},G=async r=>{const{errors:i}=await O(r);if(r)for(const n of r){const f=h(i,n);f?N(t.errors,n,f):M(t.errors,n)}else t.errors=i;return i},p=async(r,i,n={valid:!0})=>{for(const f in r){const c=r[f];if(c){const{_f:d,...x}=c;if(d){const _=m.array.has(d.name),A=c._f&&Ut(c._f);A&&v.validatingFields&&Y([f],!0);const J=await rt(c,m.disabled,l,E,s.shouldUseNativeValidation&&!i,_);if(A&&v.validatingFields&&Y([f]),J[d.name]&&(n.valid=!1,i))break;!i&&(h(J,d.name)?_?zt(t.errors,J,d.name):N(t.errors,d.name,J[d.name]):M(t.errors,d.name))}!I(x)&&await p(x,i,n)}}return n.valid},R=()=>{for(const r of m.unMount){const i=h(a,r);i&&(i._f.refs?i._f.refs.every(n=>!Ee(n)):!Ee(i._f.ref))&&Ve(r)}m.unMount=new Set},q=(r,i)=>!s.disabled&&(r&&i&&N(l,r,i),!le(xe(),o)),w=(r,i,n)=>lt(r,m,{...u.mount?l:T(i)?o:re(r)?{[r]:i}:i},n,i),F=r=>_e(h(u.mount?l:o,r,s.shouldUnregister?h(o,r,[]):[])),S=(r,i,n={})=>{const f=h(a,r);let c=i;if(f){const d=f._f;d&&(!d.disabled&&N(l,r,ct(i,d)),c=we(d.ref)&&B(i)?"":i,nt(d.ref)?[...d.ref.options].forEach(x=>x.selected=c.includes(x.value)):d.refs?ge(d.ref)?d.refs.forEach(x=>{(!x.defaultChecked||!x.disabled)&&(Array.isArray(c)?x.checked=!!c.find(_=>_===x.value):x.checked=c===x.value||!!c)}):d.refs.forEach(x=>x.checked=x.value===c):Le(d.ref)?d.ref.value="":(d.ref.value=c,d.ref.type||b.state.next({name:r,values:P(l)})))}(n.shouldDirty||n.shouldTouch)&&V(r,c,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&de(r)},U=(r,i,n)=>{for(const f in i){if(!i.hasOwnProperty(f))return;const c=i[f],d=`${r}.${f}`,x=h(a,d);(m.array.has(r)||L(c)||x&&!x._f)&&!oe(c)?U(d,c,n):S(d,c,n)}},W=(r,i,n={})=>{const f=h(a,r),c=m.array.has(r),d=P(i);N(l,r,d),c?(b.array.next({name:r,values:P(l)}),(v.isDirty||v.dirtyFields||g.isDirty||g.dirtyFields)&&n.shouldDirty&&b.state.next({name:r,dirtyFields:fe(o,l),isDirty:q(r,d)})):f&&!f._f&&!B(d)?U(r,d,n):S(r,d,n),Ge(r,m)&&b.state.next({...t}),b.state.next({name:u.mount?r:void 0,values:P(l)})},ee=async r=>{u.mount=!0;const i=r.target;let n=i.name,f=!0;const c=h(a,n),d=A=>{f=Number.isNaN(A)||oe(A)&&isNaN(A.getTime())||le(A,h(l,n,A))},x=Xe(s.mode),_=Xe(s.reValidateMode);if(c){let A,J;const be=i.type?Qe(c._f):Nt(r),ie=r.type===He.BLUR||r.type===He.FOCUS_OUT,wt=!It(c._f)&&!s.resolver&&!h(t.errors,n)&&!c._f.deps||Wt(ie,h(t.touchedFields,n),t.isSubmitted,_,x),Ae=Ge(n,m,ie);N(l,n,be),ie?(c._f.onBlur&&c._f.onBlur(r),j&&j(0)):c._f.onChange&&c._f.onChange(r);const Ne=V(n,be,ie),Ft=!I(Ne)||Ae;if(!ie&&b.state.next({name:n,type:r.type,values:P(l)}),wt)return(v.isValid||g.isValid)&&(s.mode==="onBlur"?ie&&D():ie||D()),Ft&&b.state.next({name:n,...Ae?{}:Ne});if(!ie&&Ae&&b.state.next({...t}),s.resolver){const{errors:qe}=await O([n]);if(d(be),f){const kt=et(t.errors,a,n),We=et(qe,a,kt.name||n);A=We.error,n=We.name,J=I(qe)}}else Y([n],!0),A=(await rt(c,m.disabled,l,E,s.shouldUseNativeValidation))[n],Y([n]),d(be),f&&(A?J=!1:(v.isValid||g.isValid)&&(J=await p(a,!0)));f&&(c._f.deps&&de(c._f.deps),K(n,J,A,Ne))}},ce=(r,i)=>{if(h(t.errors,i)&&r.focus)return r.focus(),1},de=async(r,i={})=>{let n,f;const c=me(r);if(s.resolver){const d=await G(T(r)?r:c);n=I(d),f=r?!c.some(x=>h(d,x)):n}else r?(f=(await Promise.all(c.map(async d=>{const x=h(a,d);return await p(x&&x._f?{[d]:x}:x)}))).every(Boolean),!(!f&&!t.isValid)&&D()):f=n=await p(a);return b.state.next({...!re(r)||(v.isValid||g.isValid)&&n!==t.isValid?{}:{name:r},...s.resolver||!r?{isValid:n}:{},errors:t.errors}),i.shouldFocus&&!f&&he(a,ce,r?c:m.mount),f},xe=r=>{const i={...u.mount?l:o};return T(r)?i:re(r)?h(i,r):r.map(n=>h(i,n))},Te=(r,i)=>({invalid:!!h((i||t).errors,r),isDirty:!!h((i||t).dirtyFields,r),error:h((i||t).errors,r),isValidating:!!h(t.validatingFields,r),isTouched:!!h((i||t).touchedFields,r)}),yt=r=>{r&&me(r).forEach(i=>M(t.errors,i)),b.state.next({errors:r?t.errors:{}})},Oe=(r,i,n)=>{const f=(h(a,r,{_f:{}})._f||{}).ref,c=h(t.errors,r)||{},{ref:d,message:x,type:_,...A}=c;N(t.errors,r,{...A,...i,ref:f}),b.state.next({name:r,errors:t.errors,isValid:!1}),n&&n.shouldFocus&&f&&f.focus&&f.focus()},mt=(r,i)=>Z(r)?b.state.subscribe({next:n=>r(w(void 0,i),n)}):w(r,i,!0),Re=r=>b.state.subscribe({next:i=>{qt(r.name,i.name,r.exact)&&Bt(i,r.formState||v,vt,r.reRenderRoot)&&r.callback({values:{...l},...t,...i})}}).unsubscribe,ht=r=>(u.mount=!0,g={...g,...r.formState},Re({...r,formState:g})),Ve=(r,i={})=>{for(const n of r?me(r):m.mount)m.mount.delete(n),m.array.delete(n),i.keepValue||(M(a,n),M(l,n)),!i.keepError&&M(t.errors,n),!i.keepDirty&&M(t.dirtyFields,n),!i.keepTouched&&M(t.touchedFields,n),!i.keepIsValidating&&M(t.validatingFields,n),!s.shouldUnregister&&!i.keepDefaultValue&&M(o,n);b.state.next({values:P(l)}),b.state.next({...t,...i.keepDirty?{isDirty:q()}:{}}),!i.keepIsValid&&D()},Me=({disabled:r,name:i})=>{(te(r)&&u.mount||r||m.disabled.has(i))&&(r?m.disabled.add(i):m.disabled.delete(i))},pe=(r,i={})=>{let n=h(a,r);const f=te(i.disabled)||te(s.disabled);return N(a,r,{...n||{},_f:{...n&&n._f?n._f:{ref:{name:r}},name:r,mount:!0,...i}}),m.mount.add(r),n?Me({disabled:te(i.disabled)?i.disabled:s.disabled,name:r}):z(r,!0,i.value),{...f?{disabled:i.disabled||s.disabled}:{},...s.progressive?{required:!!i.required,min:ye(i.min),max:ye(i.max),minLength:ye(i.minLength),maxLength:ye(i.maxLength),pattern:ye(i.pattern)}:{},name:r,onChange:ee,onBlur:ee,ref:c=>{if(c){pe(r,i),n=h(a,r);const d=T(c.value)&&c.querySelectorAll&&c.querySelectorAll("input,select,textarea")[0]||c,x=Rt(d),_=n._f.refs||[];if(x?_.find(A=>A===d):d===n._f.ref)return;N(a,r,{_f:{...n._f,...x?{refs:[..._.filter(Ee),d,...Array.isArray(h(o,r))?[{}]:[]],ref:{type:d.type,name:r}}:{ref:d}}}),z(r,!1,void 0,d)}else n=h(a,r,{}),n._f&&(n._f.mount=!1),(s.shouldUnregister||i.shouldUnregister)&&!(St(m.array,r)&&u.action)&&m.unMount.add(r)}}},$e=()=>s.shouldFocusError&&he(a,ce,m.mount),gt=r=>{te(r)&&(b.state.next({disabled:r}),he(a,(i,n)=>{const f=h(a,n);f&&(i.disabled=f._f.disabled||r,Array.isArray(f._f.refs)&&f._f.refs.forEach(c=>{c.disabled=f._f.disabled||r}))},0,!1))},Pe=(r,i)=>async n=>{let f;n&&(n.preventDefault&&n.preventDefault(),n.persist&&n.persist());let c=P(l);if(b.state.next({isSubmitting:!0}),s.resolver){const{errors:d,values:x}=await O();t.errors=d,c=x}else await p(a);if(m.disabled.size)for(const d of m.disabled)N(c,d,void 0);if(M(t.errors,"root"),I(t.errors)){b.state.next({errors:{}});try{await r(c,n)}catch(d){f=d}}else i&&await i({...t.errors},n),$e(),setTimeout($e);if(b.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:I(t.errors)&&!f,submitCount:t.submitCount+1,errors:t.errors}),f)throw f},xt=(r,i={})=>{h(a,r)&&(T(i.defaultValue)?W(r,P(h(o,r))):(W(r,i.defaultValue),N(o,r,P(i.defaultValue))),i.keepTouched||M(t.touchedFields,r),i.keepDirty||(M(t.dirtyFields,r),t.isDirty=i.defaultValue?q(r,P(h(o,r))):q()),i.keepError||(M(t.errors,r),v.isValid&&D()),b.state.next({...t}))},Ue=(r,i={})=>{const n=r?P(r):o,f=P(n),c=I(r),d=c?o:f;if(i.keepDefaultValues||(o=n),!i.keepValues){if(i.keepDirtyValues){const x=new Set([...m.mount,...Object.keys(fe(o,l))]);for(const _ of Array.from(x))h(t.dirtyFields,_)?N(d,_,h(l,_)):W(_,h(d,_))}else{if(je&&T(r))for(const x of m.mount){const _=h(a,x);if(_&&_._f){const A=Array.isArray(_._f.refs)?_._f.refs[0]:_._f.ref;if(we(A)){const J=A.closest("form");if(J){J.reset();break}}}}for(const x of m.mount)W(x,h(d,x))}l=P(d),b.array.next({values:{...d}}),b.state.next({values:{...d}})}m={mount:i.keepDirtyValues?m.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!v.isValid||!!i.keepIsValid||!!i.keepDirtyValues,u.watch=!!s.shouldUnregister,b.state.next({submitCount:i.keepSubmitCount?t.submitCount:0,isDirty:c?!1:i.keepDirty?t.isDirty:!!(i.keepDefaultValues&&!le(r,o)),isSubmitted:i.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:c?{}:i.keepDirtyValues?i.keepDefaultValues&&l?fe(o,l):t.dirtyFields:i.keepDefaultValues&&r?fe(o,r):i.keepDirty?t.dirtyFields:{},touchedFields:i.keepTouched?t.touchedFields:{},errors:i.keepErrors?t.errors:{},isSubmitSuccessful:i.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},Ie=(r,i)=>Ue(Z(r)?r(l):r,i),bt=(r,i={})=>{const n=h(a,r),f=n&&n._f;if(f){const c=f.refs?f.refs[0]:f.ref;c.focus&&(c.focus(),i.shouldSelect&&Z(c.select)&&c.select())}},vt=r=>{t={...t,...r}},Be={control:{register:pe,unregister:Ve,getFieldState:Te,handleSubmit:Pe,setError:Oe,_subscribe:Re,_runSchema:O,_getWatch:w,_getDirty:q,_setValid:D,_setFieldArray:ne,_setDisabledField:Me,_setErrors:Q,_getFieldArray:F,_reset:Ue,_resetDefaultValues:()=>Z(s.defaultValues)&&s.defaultValues().then(r=>{Ie(r,s.resetOptions),b.state.next({isLoading:!1})}),_removeUnmounted:R,_disableForm:gt,_subjects:b,_proxyFormState:v,get _fields(){return a},get _formValues(){return l},get _state(){return u},set _state(r){u=r},get _defaultValues(){return o},get _names(){return m},set _names(r){m=r},get _formState(){return t},get _options(){return s},set _options(r){s={...s,...r}}},subscribe:ht,trigger:de,register:pe,handleSubmit:Pe,watch:mt,setValue:W,getValues:xe,reset:Ie,resetField:xt,clearErrors:yt,unregister:Ve,setError:Oe,setFocus:bt,getFieldState:Te};return{...Be,formControl:Be}}function Yt(e={}){const s=H.useRef(void 0),t=H.useRef(void 0),[a,o]=H.useState({isDirty:!1,isValidating:!1,isLoading:Z(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Z(e.defaultValues)?void 0:e.defaultValues});s.current||(s.current={...e.formControl?e.formControl:Jt(e),formState:a},e.formControl&&e.defaultValues&&!Z(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));const l=s.current.control;return l._options=e,at(()=>{const u=l._subscribe({formState:l._proxyFormState,callback:()=>o({...l._formState}),reRenderRoot:!0});return o(m=>({...m,isReady:!0})),l._formState.isReady=!0,u},[l]),H.useEffect(()=>l._disableForm(e.disabled),[l,e.disabled]),H.useEffect(()=>{e.mode&&(l._options.mode=e.mode),e.reValidateMode&&(l._options.reValidateMode=e.reValidateMode),e.errors&&!I(e.errors)&&l._setErrors(e.errors)},[l,e.errors,e.mode,e.reValidateMode]),H.useEffect(()=>{e.shouldUnregister&&l._subjects.state.next({values:l._getWatch()})},[l,e.shouldUnregister]),H.useEffect(()=>{if(l._proxyFormState.isDirty){const u=l._getDirty();u!==a.isDirty&&l._subjects.state.next({isDirty:u})}},[l,a.isDirty]),H.useEffect(()=>{e.values&&!le(e.values,t.current)?(l._reset(e.values,l._options.resetOptions),t.current=e.values,o(u=>({...u}))):l._resetDefaultValues()},[l,e.values]),H.useEffect(()=>{l._state.mount||(l._setValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),s.current.formState=Ct(a,l),s.current}const Qt=(e,s,t)=>{const{id:a,type:o,title:l,required:u,options:m,minLength:j,maxLength:$,pattern:v}=e,g=a,b={required:u&&"This field is required.",minLength:j?{value:j,message:`Minimum length is ${j} characters.`}:void 0,maxLength:$?{value:$,message:`Maximum length is ${$} characters.`}:void 0,pattern:v?{value:new RegExp(v),message:"Please match the required format."}:void 0};switch(o){case"short-answer":return y.jsxs("div",{className:"mb-4",children:[y.jsxs("label",{htmlFor:g,className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[l," ",u&&y.jsx("span",{className:"text-red-500",children:"*"})]}),y.jsx("input",{type:"text",id:g,...s(g,b),className:`mt-1 p-2 w-full border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${t[g]?"border-red-500":""} dark:bg-gray-700 dark:text-white dark:border-none`}),t[g]&&y.jsx("p",{className:"text-red-500 text-xs mt-1",children:t[g].message})]},a);case"paragraph":return y.jsxs("div",{className:"mb-4",children:[y.jsxs("label",{htmlFor:g,className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[l," ",u&&y.jsx("span",{className:"text-red-500",children:"*"})]}),y.jsx("textarea",{id:g,rows:"3",...s(g,b),className:`mt-1 p-2 w-full border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${t[g]?"border-red-500":""} dark:bg-gray-700 dark:text-white dark:border-none`}),t[g]&&y.jsx("p",{className:"text-red-500 text-xs mt-1",children:t[g].message})]},a);case"multiple-choice":case"radio":return y.jsxs("div",{className:"mb-4",children:[y.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 dark:text-gray-300",children:[l," ",u&&y.jsx("span",{className:"text-red-500",children:"*"})]}),m.map(E=>y.jsxs("div",{className:"flex items-center mb-1",children:[y.jsx("input",{type:"radio",id:`${g}-${E.id}`,value:E.text,...s(g,{required:u&&"Please select an option."}),className:"focus:ring-blue-500 h-4 w-4 text-blue-600  dark:bg-gray-700 dark:text-white rounded"}),y.jsx("label",{htmlFor:`${g}-${E.id}`,className:"ml-2 block text-sm text-gray-900 dark:text-gray-300",children:E.text})]},`${a}-${E.id}`)),t[g]&&y.jsx("p",{className:"text-red-500 text-xs mt-1",children:t[g].message})]},a);case"checkboxes":return y.jsxs("div",{className:"mb-4",children:[y.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 dark:text-gray-300",children:[l," ",u&&y.jsx("span",{className:"text-red-500",children:"*"})]}),m.map(E=>y.jsxs("div",{className:"flex items-center mb-1",children:[y.jsx("input",{type:"checkbox",id:`${g}-${E.id}`,value:E.text,...s(g,{validate:u?C=>Array.isArray(C)&&C.length>0||"Please select at least one option.":void 0}),className:"focus:ring-blue-500 h-4 w-4 text-blue-600 border-gray-300 rounded dark:bg-gray-700 dark:text-white"}),y.jsx("label",{htmlFor:`${g}-${E.id}`,className:"ml-2 block text-sm text-gray-900 dark:text-gray-300",children:E.text})]},`${a}-${E.id}`)),t[g]&&y.jsx("p",{className:"text-red-500 text-xs mt-1",children:t[g].message})]},a);case"dropdown":return y.jsxs("div",{className:"mb-4",children:[y.jsxs("label",{htmlFor:g,className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[l," ",u&&y.jsx("span",{className:"text-red-500",children:"*"})]}),y.jsxs("select",{id:g,...s(g,b),className:`mt-1 p-2 w-full border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${t[g]?"border-red-500":"border-gray-300"} dark:bg-gray-700 dark:text-white dark:border-none`,children:[y.jsx("option",{value:"",children:"Select an option"}),m.map(E=>y.jsx("option",{value:E.text,children:E.text},`${a}-${E.id}`))]}),t[g]&&y.jsx("p",{className:"text-red-500 text-xs mt-1",children:t[g].message})]},a);case"date":return y.jsxs("div",{className:"mb-4",children:[y.jsxs("label",{htmlFor:g,className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[l," ",u&&y.jsx("span",{className:"text-red-500",children:"*"})]}),y.jsx("input",{type:"date",id:g,...s(g,b),className:`mt-1 p-2 w-full border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${t[g]?"border-red-500":"border-gray-300"} dark:bg-gray-700 dark:text-white dark:border-none`}),t[g]&&y.jsx("p",{className:"text-red-500 text-xs mt-1",children:t[g].message})]},a);default:return null}};function rr({formId:e,isUserMode:s=!1}){var z;const t=e,a=_t(),[o,l]=ae.useState(null),[u,m]=ae.useState("w-full lg:max-w-3xl"),[j,$]=ae.useState(!1),[v,g]=ae.useState(0),{register:b,handleSubmit:E,formState:{errors:C},control:D,getValues:Y,reset:ne}=Yt({mode:"onChange",defaultValues:{previewEmailField:""},shouldUnregister:!0}),k=Tt({control:D,defaultValue:{}});ae.useEffect(()=>{if(!o)return;const V=[{name:"previewEmailField",required:!0}];o.fields.forEach(p=>{V.push({name:p.id,required:p.required,minLength:p.minLength,maxLength:p.maxLength,pattern:p.pattern,type:p.type})});let K=0,O=0;V.forEach(p=>{const R=Y(p.name),q=Array.isArray(R)?R.length>0:R!=null&&R!=="",w=C[p.name]!==void 0;let F=!0;if(q&&(p.minLength&&typeof R=="string"&&R.length<p.minLength&&(F=!1),p.maxLength&&typeof R=="string"&&R.length>p.maxLength&&(F=!1),p.pattern&&typeof R=="string"))try{new RegExp(p.pattern).test(R)||(F=!1)}catch{F=!1}p.required?(O++,q&&F&&!w&&K++):q&&(O++,F&&!w&&K++)});let G=O===0?0:Math.round(K/O*100);C.previewEmailField&&Object.keys(C).length>1&&(G=0),g(G)},[o,k,C,Y]),ae.useEffect(()=>{if(typeof window<"u"&&t){const K=JSON.parse(localStorage.getItem("forms")||"[]").find(O=>O.id===t);if(K){l(K);const O={previewEmailField:""};K.fields.forEach(G=>{G.type==="checkboxes"?O[G.id]=[]:O[G.id]=""}),ne&&ne(O)}else console.warn(`Form with ID ${t} not found for preview.`),a("/")}},[t,a,ne]);const Q=V=>{console.log("Form Submitted!",V),alert("Form submitted successfully! Check console for data.")};return o?y.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 p-8",children:[y.jsx(pt,{}),y.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4",children:!s&&y.jsxs("div",{className:"flex space-x-2",children:[y.jsx(At,{to:`/edit-form/${o==null?void 0:o.id}`,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors",children:"â† Back to Editor"}),y.jsxs("button",{onClick:()=>Vt(o==null?void 0:o.id,$),className:"relative px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy Share Link",j&&y.jsx("span",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-xs px-2 py-1 rounded",children:"Link copied!"})]})]})}),"      ",y.jsxs("div",{className:`mx-auto bg-white dark:bg-gray-800 p-8 rounded-lg shadow-lg transition-all duration-300 ${u}`,children:[y.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white text-center sm:text-left",children:(o==null?void 0:o.title)||"Loading..."}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:o.description}),y.jsxs("div",{className:"mb-8",children:["          ",y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Form Completion"}),y.jsxs("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:[v,"%"]})]}),y.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:y.jsx("div",{className:`h-2.5 rounded-full transition-all duration-500 ease-out ${v===100?"bg-green-600":v>70?"bg-blue-600":v>30?"bg-yellow-400":"bg-red-400"}`,style:{width:`${v}%`}})})]}),o?y.jsxs("form",{onSubmit:E(Q),children:[y.jsxs("div",{className:"mb-6",children:[y.jsxs("label",{htmlFor:"previewEmailField",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Email ",y.jsx("span",{className:"text-red-500",children:"*"})]}),y.jsx("input",{type:"email",id:"previewEmailField",...b("previewEmailField",{required:"Email is required.",pattern:{value:/^\S+@\S+\.\S+$/,message:"Please enter a valid email address."}}),className:`mt-1 p-2 w-full border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${C.previewEmailField?"border-red-500":"border-gray-300"} dark:border-gray-600 dark:focus:ring-blue-500 dark:bg-gray-700 dark:text-white
                  }`,placeholder:"Valid email address"}),C.previewEmailField&&y.jsx("p",{className:"text-red-500 text-xs mt-1",children:C.previewEmailField.message})]}),y.jsx("div",{className:"space-y-6",children:(z=o.fields)==null?void 0:z.map(V=>y.jsx("div",{children:Qt(V,b,C)},V.id))}),y.jsx("button",{type:"submit",className:"mt-8 px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors font-semibold w-full sm:w-auto",children:"Submit Form"})]},o.id):y.jsxs("div",{className:"text-center py-8",children:[y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),y.jsx("p",{className:"mt-4 text-gray-600",children:"Loading form..."})]})]})]}):y.jsx("div",{className:"text-center p-8 text-gray-600",children:"Loading form or form not found..."})}export{rr as F};
